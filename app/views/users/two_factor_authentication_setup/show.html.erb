<%# TODO: This will be deleted once we fully migrate to using the newer 2FA experience. %>
<% content_for :page_title, "Set up two factor authentication" %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <h1 class="govuk-heading-l">Set up two factor authentication</h1>
    <div class="govuk-body">
      1. Scan the QR code below using an authentication app on your phone.
    </div>
    <div class="govuk-body">
      <%= image_tag(qr_code_uri, width: 180, alt: "QR code") %>
    </div>
    <div class="govuk-body">
      Or, enter this key into your authenticator app:
    </div>
    <div class="govuk-body">
      <%= twofa_key %>
    </div>
    <div class="govuk-body">
      2. <label for="code-field">Enter the six digit code generated by the authentication app on your phone.</label>
    </div>
    <div class="govuk-body">
      <%= form_with url: users_two_factor_authentication_setup_path, method: :put do |f| %>
        <%= f.hidden_field :otp_secret_key, value: @otp_secret_key %>
        <%= f.govuk_text_field :code, id: "code-field", width: 5, placeholder: "123456", maxlength: 6, label: nil %>
        <%= f.govuk_submit t(".complete_setup") %>
      <% end %>

      <div class="govuk-body">
        If you cannot set up two factor authentication, contact <a href="mailto:govwifi-support@digital.cabinet-office.gov.uk" class="govuk-link">govwifi-support@digital.cabinet-office.gov.uk</a>
      </div>
    </div>
  </div>
</div>
